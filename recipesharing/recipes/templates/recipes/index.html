{% extends 'recipes/base.html' %}
{% load static %}

{% block content %}
  <div class="container">
    <h1 class="mt-4 text-center">Discover Delicious Recipes</h1>

    {% if user.is_authenticated %}
      <p class="text-muted text-center">Hello, {{ user.username }}!</p>
      <div class="text-center mb-4">
        <a href="{% url 'add_recipe' %}" class="btn btn-success">Add New Recipe</a>
      </div>
    {% endif %}

    <!-- Filter by Category Section -->
    <form id="filter-form" method="GET" class="mb-4">
      <div class="input-group">
        <select name="category" class="form-select" id="category-select">
          <option value="" {% if not selected_category %}selected{% endif %}>All Categories</option>
          {% for category in categories %}
            <option value="{{ category.name }}" {% if selected_category == category.name %}selected{% endif %}>
              {{ category.name }}
            </option>
          {% endfor %}
        </select>
        <button type="submit" class="btn btn-primary">Filter</button>
      </div>
    </form>

    <!-- Recipes Container -->
    <div id="recipes-container">
      {% include 'recipes/partials/recipe_list.html' %}
    </div>
  </div>

  <!-- Include JavaScript for AJAX Filtering -->
  <script src="{% static 'recipes/js/filter.js' %}"></script>
{% endblock %}